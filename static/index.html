<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CRIMSON ARENA — Igris AI Agent Dashboard</title>
  <link rel="stylesheet" href="/static/style.css?v=15">
</head>
<body>

  <!-- ================================================================== -->
  <!-- HEADER                                                              -->
  <!-- ================================================================== -->
  <header class="header">
    <div class="header__brand">
      <h1 class="header__title">CRIMSON ARENA</h1>
      <span class="header__subtitle">Igris AI Agent Dashboard</span>
    </div>
    <nav class="header__nav" id="nav-tabs">
      <button class="nav-tab nav-tab--active" data-page="home">HOME</button>
      <button class="nav-tab" data-page="instances">
        INSTANCES
        <span class="nav-tab__badge" id="instances-badge">0</span>
      </button>
    </nav>
    <div class="header__controls">
      <div class="header__filter">
        <div class="filter-toggle" id="filter-toggle">
          <button class="filter-btn filter-btn--active" data-range="today">Today</button>
          <button class="filter-btn" data-range="week">This Week</button>
          <button class="filter-btn" data-range="all">All Time</button>
        </div>
      </div>
      <div class="header__meta">
        <span class="connection-status" id="connection-status" title="WebSocket status">OFFLINE</span>
      </div>
    </div>
  </header>

  <!-- ================================================================== -->
  <!-- PAGE: HOME                                                          -->
  <!-- ================================================================== -->
  <div class="page page--home" id="page-home">

    <!-- ================================================================ -->
    <!-- INSTRUMENT STRIP: War Room readout bar (expanded on HOME)         -->
    <!-- ================================================================ -->
    <div class="instrument-strip">
      <div class="instrument-strip__hp" id="hp-panel">
        <div class="digi-panel__screen">
          <div class="digi-panel__scanlines"></div>
          <div class="digi-panel__readout">
            <div class="digi-panel__label">&gt; <span id="hp-label-text">SESSION HP</span> <span class="digi-panel__dots">............</span> <span class="digi-panel__pct" id="hp-pct">0.0%</span></div>
            <div class="digi-panel__bar" id="hp-bar"></div>
            <div class="digi-panel__count mono" id="hp-count">0 / 0 tokens</div>
          </div>
        </div>
        <div class="digi-panel__bezel">
          <span class="digi-panel__ridge"></span>
          <span class="digi-panel__ridge"></span>
          <span class="digi-panel__ridge"></span>
        </div>
      </div>
      <div class="instrument-strip__divider"></div>
      <div class="instrument-strip__ctx" id="digivice">
        <div class="digi-panel__screen">
          <div class="digi-panel__scanlines"></div>
          <div class="digi-panel__readout">
            <div class="digi-panel__label">&gt; <span id="digivice-label-text">DATA LOAD</span> <span class="digi-panel__dots">............</span> <span class="digi-panel__pct" id="digivice-pct">0.0%</span></div>
            <div class="digi-panel__bar" id="digivice-bar"></div>
            <div class="digi-panel__count mono" id="digivice-count">0 / 200,000 ctx</div>
            <div class="digi-panel__tags" id="digivice-tags">
              <span class="digi-panel__tag">[cache:0]</span>
              <span class="digi-panel__tag">[in:0]</span>
              <span class="digi-panel__tag">[out:0]</span>
            </div>
          </div>
        </div>
        <div class="digi-panel__bezel">
          <span class="digi-panel__ridge"></span>
          <span class="digi-panel__ridge"></span>
          <span class="digi-panel__ridge"></span>
        </div>
      </div>
      <div class="instrument-strip__divider"></div>
      <div class="instrument-strip__sync" id="sync-panel">
        <div class="digi-panel__screen">
          <div class="digi-panel__scanlines"></div>
          <div class="digi-panel__readout">
            <div class="digi-panel__label">&gt; <span id="sync-label-text">SYNC PIPELINE</span> <span class="digi-panel__dots">............</span> <span class="digi-panel__pct" id="sync-status-text">OFFLINE</span></div>
            <div class="sync-stats">
              <div class="sync-stat">
                <span class="sync-stat__label">Last Push</span>
                <span class="sync-stat__value mono" id="sync-last-push">--</span>
              </div>
              <div class="sync-stat">
                <span class="sync-stat__label">Last Pull</span>
                <span class="sync-stat__value mono" id="sync-last-pull">--</span>
              </div>
              <div class="sync-stat">
                <span class="sync-stat__label">Queue</span>
                <span class="sync-stat__value mono" id="sync-queue-depth">0</span>
              </div>
            </div>
          </div>
        </div>
        <div class="digi-panel__bezel">
          <span class="digi-panel__ridge"></span>
          <span class="digi-panel__ridge"></span>
          <span class="digi-panel__ridge"></span>
        </div>
      </div>
    </div>

    <!-- ================================================================ -->
    <!-- HOME MAIN CONTENT                                                 -->
    <!-- ================================================================ -->
    <div class="home-content">

      <!-- ---- TOP ROW: Token Breakdown + Cost Estimate side by side ---- -->
      <div class="home-top-row">
        <!-- Token Breakdown -->
        <div class="panel token-breakdown">
          <h2 class="section-title">Token Breakdown <span class="range-label" id="range-label">— Today</span></h2>
          <div class="token-total">
            <span class="token-total__label">Direct Tokens</span>
            <span class="token-total__value mono" id="total-tokens">0</span>
          </div>
          <div class="token-total__cached mono" id="total-cached"></div>
          <div class="token-bars" id="token-bars">
            <div class="token-bar-row">
              <span class="token-bar-row__label">Input</span>
              <div class="token-bar-row__track"><div class="token-bar-row__fill token-bar-row__fill--input" id="bar-input" style="width:0%"></div></div>
              <span class="token-bar-row__count mono" id="count-input">0</span>
              <span class="token-bar-row__pct mono" id="pct-input">0%</span>
            </div>
            <div class="token-bar-row">
              <span class="token-bar-row__label">Output</span>
              <div class="token-bar-row__track"><div class="token-bar-row__fill token-bar-row__fill--output" id="bar-output" style="width:0%"></div></div>
              <span class="token-bar-row__count mono" id="count-output">0</span>
              <span class="token-bar-row__pct mono" id="pct-output">0%</span>
            </div>
            <div class="token-bars__separator"></div>
            <div class="token-bar-row">
              <span class="token-bar-row__label">Cache Read</span>
              <div class="token-bar-row__track"><div class="token-bar-row__fill token-bar-row__fill--cache-read" id="bar-cache-read" style="width:0%"></div></div>
              <span class="token-bar-row__count mono" id="count-cache-read">0</span>
              <span class="token-bar-row__pct mono" id="pct-cache-read">0%</span>
            </div>
            <div class="token-bar-row">
              <span class="token-bar-row__label">Cache Create</span>
              <div class="token-bar-row__track"><div class="token-bar-row__fill token-bar-row__fill--cache-create" id="bar-cache-create" style="width:0%"></div></div>
              <span class="token-bar-row__count mono" id="count-cache-create">0</span>
              <span class="token-bar-row__pct mono" id="pct-cache-create">0%</span>
            </div>
          </div>
          <div class="token-invocations">
            <span class="token-invocations__label">Total Invocations</span>
            <span class="token-invocations__value mono" id="total-invocations">0</span>
          </div>
        </div>

        <!-- Cost Estimate -->
        <div class="panel cost-card cost-card--no-pricing" id="cost-card">
          <h2 class="section-title">Cost Estimate</h2>
          <div class="cost-card__empty">Loading pricing data...</div>
        </div>
      </div>

      <!-- ---- BRAIN COMMAND CENTER ---- -->
      <section class="brain-section" id="brain-section">
        <div class="brain-section__header">
          <h2 class="section-title">
            <span class="section-title__icon">&#x1F9E0;</span>
            BRAIN COMMAND CENTER
          </h2>
          <div class="brain-health-badge" id="brain-health-badge">
            <span class="brain-health-badge__dot"></span>
            <span class="brain-health-badge__text">CHECKING...</span>
          </div>
        </div>

        <div class="brain-section__grid">
          <!-- Brain Health Card -->
          <div class="panel brain-health-card" id="brain-health-card">
            <h3 class="panel__title">System Health</h3>
            <div class="brain-health-stats" id="brain-health-stats">
              <div class="brain-stat">
                <span class="brain-stat__label">Status</span>
                <span class="brain-stat__value" id="brain-stat-status">--</span>
              </div>
              <div class="brain-stat">
                <span class="brain-stat__label">Version</span>
                <span class="brain-stat__value" id="brain-stat-version">--</span>
              </div>
              <div class="brain-stat">
                <span class="brain-stat__label">Latency</span>
                <span class="brain-stat__value" id="brain-stat-latency">--</span>
              </div>
              <div class="brain-stat">
                <span class="brain-stat__label">DB Size</span>
                <span class="brain-stat__value" id="brain-stat-dbsize">--</span>
              </div>
              <div class="brain-stat">
                <span class="brain-stat__label">Uptime</span>
                <span class="brain-stat__value" id="brain-stat-uptime">--</span>
              </div>
              <div class="brain-stat">
                <span class="brain-stat__label">Records</span>
                <span class="brain-stat__value" id="brain-stat-records">--</span>
              </div>
            </div>
          </div>

          <!-- Projects Panel -->
          <div class="panel brain-projects-panel" id="brain-projects-panel">
            <h3 class="panel__title">
              <span class="panel__title-icon">&#x1F4C2;</span>
              Projects
              <span class="panel__count" id="brain-projects-count">0</span>
            </h3>
            <div id="brain-projects-grid">
              <div class="brain-panel__empty">Waiting for brain connection...</div>
            </div>
          </div>

          <!-- Briefs Panel -->
          <div class="panel brain-briefs-panel" id="brain-briefs-panel">
            <h3 class="panel__title">
              <span class="panel__title-icon">&#x1F4CB;</span>
              Brief Status
              <span class="panel__count" id="brain-briefs-count">0</span>
            </h3>
            <div class="brain-briefs-summary" id="brain-briefs-summary"></div>
            <div class="brain-table-wrap" id="brain-briefs-table">
              <div class="brain-panel__empty">Waiting for brain connection...</div>
            </div>
          </div>

          <!-- Sessions Timeline -->
          <div class="panel brain-sessions-panel" id="brain-sessions-panel">
            <h3 class="panel__title">
              <span class="panel__title-icon">&#x1F550;</span>
              Recent Sessions
              <span class="panel__count" id="brain-sessions-count">0</span>
            </h3>
            <div id="brain-sessions-list">
              <div class="brain-panel__empty">Waiting for brain connection...</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ---- KNOWLEDGE + SKILL HEATMAP ROW ---- -->
      <div class="home-knowledge-row">
        <!-- Knowledge Base Panel -->
        <div class="panel brain-knowledge-panel" id="brain-knowledge-panel">
          <h3 class="panel__title">
            <span class="panel__title-icon">&#x1F4DA;</span>
            Knowledge Base
          </h3>
          <div class="brain-knowledge-stats">
            <div class="brain-stat">
              <span class="brain-stat__label">Learnings</span>
              <span class="brain-stat__value mono" id="knowledge-learnings-count">0</span>
            </div>
            <div class="brain-stat">
              <span class="brain-stat__label">Errors</span>
              <span class="brain-stat__value mono" id="knowledge-errors-count">0</span>
            </div>
            <div class="brain-stat">
              <span class="brain-stat__label">Patterns</span>
              <span class="brain-stat__value mono" id="knowledge-patterns-count">0</span>
            </div>
          </div>
          <div class="brain-knowledge-recent" id="brain-knowledge-recent">
            <div class="brain-panel__empty">Waiting for knowledge data...</div>
          </div>
        </div>

        <!-- Skill Heatmap -->
        <section class="panel skill-heatmap-panel" id="skill-heatmap-section" aria-label="Skill Heatmap">
          <div class="skill-heatmap__header">
            <h2 class="section-title">Skill Invocation Heatmap</h2>
            <span class="skill-heatmap__total mono" id="skill-heatmap-total">0 total</span>
          </div>
          <div class="skill-heatmap__bars" id="skill-heatmap-bars">
            <div class="brain-panel__empty">No skill data yet</div>
          </div>
        </section>
      </div>

      <!-- ---- AGENT ROSTER (horizontal compact strip) ---- -->
      <section class="agent-roster-section" id="agent-roster-section" aria-label="Agent Roster">
        <h2 class="section-title">Agent Roster</h2>
        <div class="agent-roster" id="agent-roster">
          <!-- Agent roster cards rendered by app.js -->
        </div>
      </section>

      <!-- ---- BATTLE LOG ---- -->
      <section class="panel battle-log-panel" id="battle-log-panel">
        <h2 class="section-title">Battle Log</h2>
        <div class="battle-log" id="battle-log">
          <div class="battle-log__empty">Awaiting agent activity...</div>
        </div>
      </section>

      <!-- ---- OVERALL STATS BAR (replaces RPG Party Stats footer) ---- -->
      <footer class="overall-stats" id="overall-stats">
        <div class="overall-stats__item">
          <span class="overall-stats__label">Total Invocations</span>
          <span class="overall-stats__value mono" id="overall-invocations">0</span>
        </div>
        <div class="overall-stats__divider"></div>
        <div class="overall-stats__item">
          <span class="overall-stats__label">Total Tokens</span>
          <span class="overall-stats__value mono" id="overall-tokens">0</span>
        </div>
        <div class="overall-stats__divider"></div>
        <div class="overall-stats__item">
          <span class="overall-stats__label">Total Cost</span>
          <span class="overall-stats__value mono" id="overall-cost">$0.00</span>
        </div>
        <div class="overall-stats__divider"></div>
        <div class="overall-stats__item">
          <span class="overall-stats__label">Uptime</span>
          <span class="overall-stats__value mono" id="overall-uptime">--</span>
        </div>
      </footer>

    </div><!-- .home-content -->
  </div><!-- #page-home -->

  <!-- ================================================================== -->
  <!-- PAGE: INSTANCES                                                     -->
  <!-- ================================================================== -->
  <div class="page page--instances" id="page-instances" style="display:none">

    <!-- Compact Vital Signs Strip -->
    <div class="compact-vitals" id="compact-vitals">
      <span class="compact-vitals__item">
        <span class="compact-vitals__label">HP:</span>
        <span class="compact-vitals__value" id="compact-hp">--</span>
      </span>
      <span class="compact-vitals__sep">|</span>
      <span class="compact-vitals__item">
        <span class="compact-vitals__label">CTX:</span>
        <span class="compact-vitals__value" id="compact-ctx">--</span>
      </span>
      <span class="compact-vitals__sep">|</span>
      <span class="compact-vitals__item">
        <span class="compact-vitals__label">SYNC:</span>
        <span class="compact-vitals__value" id="compact-sync">--</span>
      </span>
    </div>

    <!-- Instance List -->
    <div class="instances-content">
      <div class="instances-header">
        <h2 class="section-title">Running Instances</h2>
        <span class="instances-header__count mono" id="instances-count-summary">0 active / 0 idle</span>
      </div>
      <div class="instances-list" id="instances-list">
        <!-- Instance cards rendered by app.js; empty state by default -->
        <div class="instances-empty" id="instances-empty">
          <div class="instances-empty__icon">. . . . . . . .</div>
          <div class="instances-empty__title">NO ACTIVE INSTANCES</div>
          <div class="instances-empty__commands">
            <div class="instances-empty__cmd"><span class="instances-empty__cmd-label">Start a session:</span> <span class="mono">/awaken</span></div>
            <div class="instances-empty__cmd"><span class="instances-empty__cmd-label">Begin a hunt:</span> <span class="mono">/hunt BR-008</span></div>
            <div class="instances-empty__cmd"><span class="instances-empty__cmd-label">Deploy a team:</span> <span class="mono">/team hunt BR-008 BR-009</span></div>
          </div>
        </div>
      </div>
    </div>

  </div><!-- #page-instances -->

  <script src="/static/app.js?v=15"></script>
</body>
</html>
